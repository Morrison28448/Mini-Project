{% extends 'base.html' %}
{% block content %}
<div class="page-header">
	<div class="d-flex justify-content-between align-items-center">
		<div>
			<h3>
				<i class="bi bi-graph-up-arrow me-2 text-primary"></i>Your Activity Analytics
			</h3>
			<p class="text-muted mb-0">Visual summary of your submissions over time</p>
		</div>
		<div class="d-flex gap-2">
			<a href="{% url 'intern_dashboard' %}" class="btn btn-outline-secondary">
				<i class="bi bi-arrow-left me-1"></i>Back to Dashboard
			</a>
		</div>
	</div>
</div>

<div class="card mb-4">
	<div class="card-header">
		<i class="bi bi-funnel me-2"></i>Time Range
	</div>
	<div class="card-body">
		<form method="get" class="d-flex flex-wrap gap-2 align-items-center">
			<input type="hidden" name="period" value="{{ period }}" />
			<div class="btn-group" role="group">
				<a class="btn btn-outline-primary {% if period == 'day' %}active{% endif %}" href="?period=day">Daily</a>
				<a class="btn btn-outline-primary {% if period == 'week' %}active{% endif %}" href="?period=week">Weekly</a>
				<a class="btn btn-outline-primary {% if period == 'month' %}active{% endif %}" href="?period=month">Monthly</a>
			</div>
		</form>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<i class="bi bi-bar-chart-line me-2"></i>Submissions by {{ period|title }}
	</div>
	<div class="card-body">
		<canvas id="activityChart" height="120"></canvas>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
const labels = {{ labels|safe }};
const dataPoints = {{ data|safe }};
const ctx = document.getElementById('activityChart').getContext('2d');
const gradient = ctx.createLinearGradient(0, 0, 0, 400);
gradient.addColorStop(0, 'rgba(102, 126, 234, 0.5)');
gradient.addColorStop(1, 'rgba(118, 75, 162, 0.1)');

new Chart(ctx, {
	type: 'line',
	data: {
		labels: labels,
		datasets: [{
			label: 'Tasks Submitted',
			data: dataPoints,
			fill: true,
			backgroundColor: gradient,
			borderColor: '#667eea',
			tension: 0.35,
			pointBackgroundColor: '#667eea',
			pointBorderColor: '#fff',
			pointBorderWidth: 2
		}]
	},
	options: {
		responsive: true,
		scales: {
			y: { beginAtZero: true, ticks: { precision: 0 } }
		}
	}
});
</script>
{% endblock %}


